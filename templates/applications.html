{% extends 'event.html' %}
{% load static %}

{% block title %}{{ page.title }}{% endblock %}
{% block description %}{{ page.description }}{% endblock %}

{% block content %}

<div class="container without-background">
    <h3 class="page-header">All applications for {{ page.title }}</h3>
    {% if applications %}
        <p>Filter: <a href="?">All</a> | <a href="?state=submitted" class="text-primary">Submitted</a> | <a href="?state=accepted" class="text-success">Accepted</a> | <a href="?state=rejected" class="text-danger">Rejected</a></p>
        <table class="table applications">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Created</th>
                    <th>Status</th>
                    <th>&nbsp;</th>
                </tr>
            </thead>
            <tbody>
                {% for app in applications %}
                <tr>
                    <td><a href='{{ app.id }}'>{{ app.id }}</a></td>
                    <td>{{ app.created }}</td>
                    <td><span class="label">{{ app.get_state_display }}</span></td>
                    <td class="text-right"><a href="{{ app.id }}" class="btn">View Application</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="lead">Nothing to see here...</p>
    {% endif %}
</div>

<script>
  // for setting the label color
  $.each($('.label'), function(){
    var status = $(this);
    if(status.text() == 'Accepted' || status.text() == 'accepted'){
      status.addClass(' label-success');
    } else if (status.text() == 'Rejected' || status.text() == 'rejected'){
      status.addClass(' label-danger');
    } else if (status.text() == 'Submitted' || status.text() == 'submitted'){
        status.addClass(' label-primary')
    } else {
        status.addClass(' label-default')
    }
  })
</script>

{% endblock %}
